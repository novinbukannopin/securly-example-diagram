@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Container Diagram for URL Shortening Service

AddElementTag("deepLearning", $shape=EightSidedShape(), $bgColor="CornflowerBlue", $fontColor="white", $legendText="Deep Learning Service")
AddElementTag("api", $shape=RoundedBoxShape(), $bgColor="lightSkyBlue", $fontColor="white")

SHOW_PERSON_OUTLINE()

Person(user, "User", "A person using the URL shortening service")

System_Boundary(c1, "URL Shortening System") {
    Container(webApp, "Web Application", "React/Next.js", "User interface for URL shortening and security analysis")
    Container(api, "API", "Node.js/Express", "Handles URL shortening, authentication, and feedback", $tags = "api")
    Container(deepLearningAPI, "Deep Learning API", "Python/Flask", "Detects URL security using a deep learning model", $tags = "deepLearning")
    Container(redis, "Redis", "In-Memory Database", "Rate limiter for API requests")
    ContainerDb(db, "Database", "PostgreSQL", "Stores user data, URLs, reviews, and analytics")
}

Rel(user, webApp, "Uses", "HTTPS")
Rel(webApp, api, "Makes API calls to")
Rel(api, db, "Reads from and writes to", "SQL/JDBC, port 5432")
Rel(api, deepLearningAPI, "Sends URL for security analysis")
Rel(deepLearningAPI, redis, "Uses Redis for caching results")

@enduml